{"version":3,"file":"static/webpack/static/development/pages/_app.js.4c082175d1317931d1c3.hot-update.js","sources":["webpack:///./components/Cart.js"],"sourcesContent":["import React from 'react';\nimport {Query, Mutation} from 'react-apollo';\nimport gql from 'graphql-tag';\nimport {adopt} from 'react-adopt'\nimport User from './User';\nimport CartStyles from './styles/CartStyles';\nimport Supreme from './styles/Supreme';\nimport CloseButton from './styles/CloseButton';\nimport SickButton from './styles/SickButton';\nimport CartItem from './CartItem';\nimport calcTotalPrice from '../lib/calcTotalPrice';\nimport formatMoney from \"../lib/formatMoney\";\n\nconst LOCAL_STATE_QUERY = gql`\n    query{\n        cartOpen @client\n    }\n`;\n\nconst TOGGLE_CART_MUTATION = gql`\n    mutation {\n        toggleCart @client\n    }\n`;\n\nconst Composed = adopt({\n    user: <User/>,\n    toggleCart: <Mutation mutation={TOGGLE_CART_MUTATION}/>,\n    localState: <Query query={LOCAL_STATE_QUERY}/>\n});\n\nconst Cart = () => {\n    return (\n        <Composed>\n            {({user, toggleCart, localState})=>{\n                const me  = user.data.me\n            }}\n            {({data: {me}}) => {\n                if (!me) return null;\n                console.log(me);\n                return (\n                    <Mutation mutation={TOGGLE_CART_MUTATION}>\n                        {toggleCart => (\n                            <Query query={LOCAL_STATE_QUERY}>\n                                {({data}) => (\n                                    <CartStyles open={data.cartOpen}>\n                                        <header>\n                                            <CloseButton onClick={toggleCart} title='close'>&times;</CloseButton>\n                                            <Supreme>{me.name}'s Cart</Supreme>\n                                            <p>You have {me.cart.length} Item{me.cart.length === 1 ? '' : 's'} in your\n                                                cart.</p>\n                                        </header>\n                                        <ul>\n                                            {me.cart.map(cartItem => <CartItem key={cartItem.id}\n                                                                               cartItem={cartItem}>{cartItem.id}</CartItem>)}\n                                        </ul>\n                                        <footer>\n                                            <p>{formatMoney(calcTotalPrice(me.cart))}</p>\n                                            <SickButton>Checkout</SickButton>\n                                        </footer>\n                                    </CartStyles>\n                                )}\n                            </Query>\n                        )}\n                    </Mutation>\n                )\n            }}\n        </Composed>\n    );\n};\n\nexport default Cart;\nexport {LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAMA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AACA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAdA;AAFA;AAwBA;AAGA;AACA;AACA;;;;;A","sourceRoot":""}